# complybeacon

**ComplyBeacon** is an observability toolkit designed to collect, normalize, and enrich compliance evidence extending OpenTelemetry (OTEL) standard.

By bridging the gap between raw policy scanner output and modern logging pipelines, it provides a unified, enriched, and auditable data stream for security and compliance analysis.

> WARNING: All components are under initial development and are **not** ready for production use.

## Components

ComplyBeacon is policy-driven observability toolkit consisting of four components:


#### Proofwatch

This is a helper library that sends OCSF-formatted logs to the collector via the Logs API. It is meant to act as a
"log bridge" for logging evidence.

> Attributes are defined [here](./docs/ATTRIBUTES.md)

### Beacon:

This is the pipeline's host, a custom OpenTelemetry Collector distribution. Its role is to receive and process the log records generated by ProofWatch instrumentation libraries.
Beacon is pre-configured to include the TruthBeam processor, which is the next step in the data pipeline.

### Processors

#### TruthBeam

A processor that is dedicated to constructing requests to Compass for log enrichment with compliance and risk data.

### Compass
This is a central, stateful service that provides the enrichment data.  It uses a `gemara` model to look up and tag the evidence with additional context.
Based on the policy IDs and other details provided by the TruthBeam, Compass adds new attributes like risk, threat, and regulatory information. This makes the raw log data meaningful for security analysis and reporting.

#### Support Compass Mappers

| Mapper  | Description                          |
|---------|--------------------------------------|
| `basic` | Maps to `gemara` based on attributes |

# Quick Start

```bash
# Deploy the infrastructure - grafana, loki, the custom collector, compass
podman-compose up --build

# Test the pipeline. Send data to webhook receiver.
curl -X POST http://localhost:8088/eventsource/receiver -H "Content-Type: application/json" -d @hack/sampledata/evidence.json
```

For additional details on the full design (planned) see [`DESIGN.md`](./docs/DESIGN.md)
